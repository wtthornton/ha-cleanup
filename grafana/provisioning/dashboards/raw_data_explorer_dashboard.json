{
  "id": null,
  "title": "Production Raw Data Explorer Dashboard",
  "tags": ["raw-data", "data-exploration", "home-assistant", "ha-ingestor", "production", "prod"],
  "style": "dark",
  "timezone": "browser",
  "refresh": "30s",
  "time": {"from": "now-1h", "to": "now"},
  "panels": [
    {
      "id": 1,
      "title": "Raw Event Data Table",
      "type": "table",
      "gridPos": {"h": 12, "w": 24, "x": 0, "y": 0},
      "targets": [
        {
          "query": "from(bucket: \"ha_events\")\n  |> range(start: -1h)\n  |> filter(fn: (r) => r[\"_measurement\"] =~ /ha_/)\n  |> sort(columns: [\"_time\"], desc: true)\n  |> limit(n: 100)\n  |> keep(columns: [\"_time\", \"_measurement\", \"entity_id\", \"domain\", \"state\", \"source\", \"_field\", \"_value\"])",
          "refId": "A"
        }
      ]
    },
    {
      "id": 2,
      "title": "Entity State Distribution",
      "type": "table",
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 12},
      "targets": [
        {
          "query": "from(bucket: \"ha_events\")\n  |> range(start: -1h)\n  |> filter(fn: (r) => r[\"_measurement\"] =~ /ha_/)\n  |> filter(fn: (r) => r[\"_field\"] == \"state\")\n  |> group(columns: [\"entity_id\", \"domain\", \"state\"])\n  |> count()\n  |> sort(columns: [\"_value\"], desc: true)\n  |> limit(n: 50)",
          "refId": "A"
        }
      ]
    },
    {
      "id": 3,
      "title": "Attribute Values Breakdown",
      "type": "table",
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 12},
      "targets": [
        {
          "query": "from(bucket: \"ha_events\")\n  |> range(start: -1h)\n  |> filter(fn: (r) => r[\"_measurement\"] =~ /ha_/)\n  |> filter(fn: (r) => r[\"_field\"] =~ /attr_.*/)\n  |> group(columns: [\"_field\", \"_value\"])\n  |> count()\n  |> sort(columns: [\"_value\"], desc: true)\n  |> limit(n: 50)",
          "refId": "A"
        }
      ]
    }
  ]
}
